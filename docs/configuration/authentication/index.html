<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.2" />
    <meta name="description" content="Cassandra Reaper documentation">


    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <title>Authentication :: Reaper: Easy Repair Management for Apache Cassandra</title>

    
    <link href="/css/nucleus.css?1590085034" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1590085034" rel="stylesheet">
    <link href="/css/hybrid.css?1590085034" rel="stylesheet">
    <link href="/css/featherlight.min.css?1590085034" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1590085034" rel="stylesheet">
    <link href="/css/auto-complete.css?1590085034" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1590085034" rel="stylesheet">
    <link href="/css/theme.css?1590085034" rel="stylesheet">
    <link href="/css/hugo-theme.css?1590085034" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1590085034" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1590085034"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/configuration/authentication/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img src="/img/logo.png"  alt="Reaper logo"></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1590085034"></script>
<script type="text/javascript" src="/js/auto-complete.js?1590085034"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/cassandra-reaper.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1590085034"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/install/" title="Build and Install" class="dd-item 
        
        
        
        ">
      <a href="/install/">
          Build and Install
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/install/install/" title="Package Install Guide" class="dd-item ">
        <a href="/install/install/">
        Package Install and Setup
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/install/docker/" title="Docker Setup Guide" class="dd-item ">
        <a href="/install/docker/">
        Docker Build and Setup
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/install/upgrade/" title="Upgrade Guide" class="dd-item ">
        <a href="/install/upgrade/">
        Upgrade Guide
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/install/building/" title="Build from Source Guide" class="dd-item ">
        <a href="/install/building/">
        Build from Source
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/concepts/" title="Core Concepts" class="dd-item 
        
        
        
        ">
      <a href="/concepts/">
          Core Concepts
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/backends/" title="Backends" class="dd-item 
        
        
        
        ">
      <a href="/backends/">
          Backends
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/backends/memory/" title="In-Memory Backend" class="dd-item ">
        <a href="/backends/memory/">
        In-Memory
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/backends/h2/" title="H2 Backend" class="dd-item ">
        <a href="/backends/h2/">
        H2
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/backends/postgres/" title="Postgres Backend" class="dd-item ">
        <a href="/backends/postgres/">
        Postgres
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/backends/cassandra/" title="Cassandra Backend" class="dd-item ">
        <a href="/backends/cassandra/">
        Cassandra
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/configuration/" title="Configuration Reference" class="dd-item 
        parent
        
        
        ">
      <a href="/configuration/">
          Configuration
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/configuration/reaper_specific/" title="Reaper Specific Settings" class="dd-item ">
        <a href="/configuration/reaper_specific/">
        Reaper Specific Settings
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/backend_specific/" title="Backend Specific Settings" class="dd-item ">
        <a href="/configuration/backend_specific/">
        Backend Specific Settings
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/docker_vars/" title="Docker Variables" class="dd-item ">
        <a href="/configuration/docker_vars/">
        Docker Variables
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/authentication/" title="Authentication" class="dd-item active">
        <a href="/configuration/authentication/">
        Authentication
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/metrics/" title="Metrics" class="dd-item 
        
        
        
        ">
      <a href="/metrics/">
          Metrics
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/metrics/graphite/" title="Graphite Reporter" class="dd-item ">
        <a href="/metrics/graphite/">
        Graphite Reporter
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/usage/" title="Using Reaper" class="dd-item 
        
        
        
        ">
      <a href="/usage/">
          Using Reaper
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/usage/add_cluster/" title="Adding a Cluster" class="dd-item ">
        <a href="/usage/add_cluster/">
        Adding a Cluster
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/health/" title="Checking a Cluster&#39;s Health" class="dd-item ">
        <a href="/usage/health/">
        Checking a Cluster&#39;s Health
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/single/" title="Running a Cluster Repair" class="dd-item ">
        <a href="/usage/single/">
        Running a Cluster Repair
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/schedule/" title="Scheduling a Cluster Repair" class="dd-item ">
        <a href="/usage/schedule/">
        Scheduling a Cluster Repair
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/multi_dc_non-distributed/" title="Operating Multiple DCs with a Single Reaper" class="dd-item ">
        <a href="/usage/multi_dc_non-distributed/">
        Multi DCs with One Reaper
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/multi_dc_distributed/" title="perating Multiple DCs using Multiple Reaper" class="dd-item ">
        <a href="/usage/multi_dc_distributed/">
        Multi DCs with Multi Reapers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/sidecar_mode/" title="Sidecar Mode" class="dd-item ">
        <a href="/usage/sidecar_mode/">
        Sidecar Mode
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/cassandra-diagnostics/" title="Cassandra Diagnostic Events" class="dd-item ">
        <a href="/usage/cassandra-diagnostics/">
        Cassandra Diagnostic Events
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/development/" title="Development" class="dd-item 
        
        
        
        ">
      <a href="/development/">
          Development
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/development/api/" title="REST API" class="dd-item ">
        <a href="/development/api/">
        REST API
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/downloads"><i class='fas fa-download'></i> Downloads</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/thelastpickle/cassandra-reaper"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/community"><i class='fas fa-comments'></i> Community</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/faq"><i class='fas fa-question-circle'></i> FAQ</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Cassandra Reaper</a> > <a href='/configuration/'>Configuration Reference</a> > Authentication
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#default-settings">Default settings</a></li>
    <li><a href="#with-clear-passwords">With clear passwords</a></li>
    <li><a href="#with-encrypted-passwords">With encrypted passwords</a></li>
    <li><a href="#with-ldap-accounts">With LDAP accounts</a></li>
    <li><a href="#accessing-reaper-via-the-command-line-spreaper">Accessing Reaper via the command line <code>spreaper</code></a></li>
    <li><a href="#accessing-reaper-via-the-rest-api">Accessing Reaper via the REST API</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Authentication
            </h1>
          

        



<p>Authentication is activated in Reaper by default. It relies on <a href="https://shiro.apache.org/">Apache Shiro</a>, which allows to store users and password in files, databases or connect through LDAP and Active Directory out of the box. The default authentication uses the dummy username and password as found in the default <a href="https://github.com/thelastpickle/cassandra-reaper/blob/master/src/server/src/main/resources/shiro.ini">shiro.ini</a>. It is expected you override this in a production environment.</p>
<p>This default Shiro authentication configuration is referenced via the  following block in the Reaper yaml file :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">accessControl:</span>
  <span style="color:#a6e22e">sessionTimeout: PT10M</span>
  <span style="color:#a6e22e">shiro:</span>
    <span style="color:#a6e22e">iniConfigs: [&#34;classpath:shiro.ini&#34;]</span>
</code></pre></div><h2 id="default-settings">Default settings</h2>
<p>As of Reaper 1.4.0, authentication is enabled by default and credentials are:</p>
<ul>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>
<h2 id="with-clear-passwords">With clear passwords</h2>
<p>Copy the default <code>shiro.ini</code> file and adapt it overriding the &ldquo;users&rdquo; section :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">…</span>

<span style="color:#66d9ef">[users]</span>
<span style="color:#a6e22e">user1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">password1</span>
<span style="color:#a6e22e">user2</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">password2</span>

<span style="color:#a6e22e">…</span>
</code></pre></div><h2 id="with-encrypted-passwords">With encrypted passwords</h2>
<p>Based on <a href="https://shiro.apache.org/configuration.html#Configuration-EncryptingPasswords">Shiro&rsquo;s document on Encrypting passwords</a> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[main]</span>
<span style="color:#a6e22e">authc</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter</span>
<span style="color:#a6e22e">authc.loginUrl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/webui/login.html</span>
<span style="color:#a6e22e">sha256Matcher</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">org.apache.shiro.authc.credential.Sha256CredentialsMatcher</span>
<span style="color:#a6e22e">iniRealm.credentialsMatcher</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">$sha256Matcher</span>

<span style="color:#66d9ef">[users]</span>
<span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">807A09440428C0A8AEF58BD3ECE32938B0D76E638119E47619756F5C2C20FF3A</span>

<span style="color:#a6e22e">…</span>
</code></pre></div><p>To generate a password, you case use for example :</p>
<ul>
<li>From the command line :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">echo -n <span style="color:#e6db74">&#34;Hello World&#34;</span> | shasum -a <span style="color:#ae81ff">256</span>
echo -n <span style="color:#e6db74">&#34;Hello World&#34;</span> | sha256sum
</code></pre></div><ul>
<li>Or some language of your choice  (like Python here) :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> hashlib
hash_object <span style="color:#f92672">=</span> hashlib<span style="color:#f92672">.</span>sha256(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;Hello World&#39;</span>)
hex_dig <span style="color:#f92672">=</span> hash_object<span style="color:#f92672">.</span>hexdigest()
<span style="color:#66d9ef">print</span>(hex_dig)
a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e
</code></pre></div><h2 id="with-ldap-accounts">With LDAP accounts</h2>
<p>Based on <a href="https://shiro.apache.org/static/1.2.4/apidocs/org/apache/shiro/realm/ldap/JndiLdapContextFactory.html">Shiro&rsquo;s LDAP realm usage</a>.</p>
<p>An example configuration for LDAP authentication exists (commented out) in the default shiro.ini :</p>
<pre><code>
# Example LDAP realm, see https://shiro.apache.org/static/1.2.4/apidocs/org/apache/shiro/realm/ldap/JndiLdapContextFactory.html
ldapRealm = org.apache.shiro.realm.ldap.JndiLdapRealm
ldapRealm.userDnTemplate = uid={0},ou=users,dc=cassandra-reaper,dc=io
ldapRealm.contextFactory.url = ldap://ldapHost:389
;ldapRealm.contextFactory.authenticationMechanism = DIGEST-MD5
;ldapRealm.contextFactory.systemUsername = cn=Manager, dc=example, dc=com
;ldapRealm.contextFactory.systemPassword = secret
;ldapRealm.contextFactory.environment[java.naming.security.credentials] = ldap_password

</code></pre><h2 id="accessing-reaper-via-the-command-line-spreaper">Accessing Reaper via the command line <code>spreaper</code></h2>
<p>In order to interact with Reaper through <code>spreaper</code> when Shiro authentication is activated, you will first need to login as follows:</p>
<pre><code>$ ./spreaper login admin
Password: *****
# Logging in...
You are now authenticated to Reaper.
# JWT saved

</code></pre><p>The JWT will be saved in <code>~/.reaper/jwt</code> and automatically used by Reaper for any other call.
Pre-existing tokens can be passed to spreaper using <code>--jwt &lt;token&gt;</code> with any call.</p>
<h2 id="accessing-reaper-via-the-rest-api">Accessing Reaper via the REST API</h2>
<p>The RESTful endpoints to Reaper can also be authenticated using JWT (Java Web Token).</p>
<p>A token can be generated from the <code>/jwt</code> url by passing the Session ID cookie retrieved from the <code>/login</code> endpoint.
Logging in through <code>/login</code> is described in the <a href="/docs/api/">REST Api page</a>.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1590085034"></script>
    <script src="/js/perfect-scrollbar.min.js?1590085034"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1590085034"></script>
    <script src="/js/jquery.sticky.js?1590085034"></script>
    <script src="/js/featherlight.min.js?1590085034"></script>
    <script src="/js/highlight.pack.js?1590085034"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1590085034"></script>
    <script src="/js/learn.js?1590085034"></script>
    <script src="/js/hugo-learn.js?1590085034"></script>

    <link href="/mermaid/mermaid.css?1590085034" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1590085034"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

